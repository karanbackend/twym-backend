# Example env file - provide values for your environment. Do NOT commit secrets to public repos.

# Node / app
NODE_ENV=development

# Database (used when DATABASE_URL is not provided)
# The docker-compose `db` service in `compose.yml` uses POSTGRES_USER=twym and POSTGRES_PASSWORD=postgres.
DB_TYPE=postgres
# When running with docker-compose set DB_HOST=db. For local host connections use localhost.
DB_HOST=db
DB_PORT=5432
# Credentials matching compose.yml: POSTGRES_USER=twym, POSTGRES_PASSWORD=postgres
DB_USER=twym
DB_PASS=postgres
DB_NAME=twym
# Alternatively set DATABASE_URL for production (e.g. postgres://user:pass@host:5432/dbname)
DATABASE_URL=
# Use 'true' or 'false'
DB_SSL=false
TYPEORM_SYNC=false

# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key
# Legacy / alternate name
SUPABASE_KEY=
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_BUCKET=public

# JWT
JWT_SECRET=your-jwt-secret
# Examples: 15m, 1h, 7d
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=twym
JWT_AUDIENCE=twym-users

FRONTEND_URL=
API_URL=http://localhost:3000/api/v1

# Google Cloud Vision OCR (optional - for business card scanning)
# Set to 'true' to enable synchronous OCR processing during upload
# Option 1: Use GOOGLE_CREDENTIALS_JSON for inline JSON credentials (recommended for cloud deployments)
# Option 2: Use GOOGLE_APPLICATION_CREDENTIALS for file path to service account JSON (recommended for local dev)
GOOGLE_OCR_ENABLED=false
GOOGLE_CREDENTIALS_B64=
GOOGLE_APPLICATION_CREDENTIALS=./keys/google-ocr.json

# Rate Limiting
# Time window in milliseconds (default: 60000 = 60 seconds)
RATE_LIMIT_TTL=60000
# Maximum number of requests per time window (default: 10)
RATE_LIMIT_MAX=10

# CORS (Cross-Origin Resource Sharing)
# Enable/disable CORS (default: true)
CORS_ENABLED=true
# Allowed origins - can be: single URL, comma-separated URLs, or 'true' for dynamic
# Examples:
#   Single origin: https://app.twym.com
#   Multiple origins: https://app.twym.com,https://admin.twym.com,http://localhost:3001
#   Dynamic (dev only): true
CORS_ORIGIN=true
# Allow credentials (cookies, authorization headers) in CORS requests
CORS_CREDENTIALS=true

# Calendar Integration
# Encryption key for securing OAuth tokens (REQUIRED for calendar feature)
# Generate with: openssl rand -base64 32
CALENDAR_ENCRYPTION_KEY=your-32-character-encryption-key-change-in-production

# Google Calendar OAuth Configuration
GOOGLE_CALENDAR_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CALENDAR_CLIENT_SECRET=your-google-client-secret

# Microsoft Calendar OAuth Configuration
MICROSOFT_CALENDAR_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CALENDAR_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALENDAR_TENANT_ID=common
